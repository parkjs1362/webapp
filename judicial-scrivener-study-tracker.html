<!DOCTYPE html>
<html lang="ko">
<!--
    ë²•ë¬´ì‚¬ ì‹œí—˜ ì „ëµì  í•™ìŠµ ì‹œìŠ¤í…œ
    Version: 2.0.0
    Last Updated: 2025-10-14

    Changes in v2.0.0:
    - Added support for 2ì°¨ (secondary) exam subjects
    - Fixed subject progress editing functionality
    - Fixed mock exam score delete functionality (always visible now)
    - Fixed study strategy (time blocks) edit/delete functionality
    - Improved event handlers to use proper onclick bindings
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë²•ë¬´ì‚¬ ì‹œí—˜ ì „ëµì  í•™ìŠµ ì‹œìŠ¤í…œ (1ì°¨/2ì°¨) v2.0.0 | D-318</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #4A5568;
            --primary-dark: #2D3748;
            --accent: #3182CE;
            --success: #48BB78;
            --warning: #F6AD55;
            --danger: #F56565;
            --bg-light: #F7FAFC;
            --text-primary: #1A202C;
            --text-secondary: #718096;
            --border: #E2E8F0;
        }
        
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-light);
            color: var(--text-primary);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* í—¤ë” ìŠ¤íƒ€ì¼ */
        .header {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.06);
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-dark);
        }
        
        .d-day-badge {
            background: var(--danger);
            color: white;
            padding: 12px 24px;
            border-radius: 30px;
            font-size: 1.3rem;
            font-weight: bold;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .study-mode-selector {
            display: flex;
            gap: 10px;
            background: var(--bg-light);
            padding: 5px;
            border-radius: 8px;
        }
        
        .mode-btn {
            padding: 8px 16px;
            border: none;
            background: transparent;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .mode-btn.active {
            background: var(--accent);
            color: white;
        }
        
        /* ëŒ€ì‹œë³´ë“œ ê·¸ë¦¬ë“œ */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.06);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-dark);
        }
        
        .card-actions {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            width: 28px;
            height: 28px;
            border: none;
            background: var(--bg-light);
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .action-btn:hover {
            background: var(--accent);
            color: white;
        }
        
        .action-btn.edit:hover {
            background: var(--warning);
        }
        
        .action-btn.delete:hover {
            background: var(--danger);
        }
        
        /* ì˜¤ëŠ˜ì˜ í•™ìŠµ ê³„íš */
        .today-plan {
            grid-column: span 2;
        }
        
        .time-blocks {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .time-block {
            background: var(--bg-light);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--accent);
            transition: all 0.3s;
            position: relative;
        }
        
        .time-block.completed {
            background: #E6FFFA;
            border-left-color: var(--success);
        }
        
        .time-block:hover {
            transform: translateX(5px);
        }
        
        .time-block-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
        }
        
        .time-block-btn {
            width: 20px;
            height: 20px;
            border: none;
            background: rgba(255,255,255,0.8);
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.7rem;
            transition: all 0.3s;
        }
        
        .time-block-btn:hover {
            background: var(--accent);
            color: white;
        }
        
        .time-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }
        
        .time-subject {
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .time-detail {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        .check-btn {
            margin-top: 10px;
            padding: 6px 12px;
            background: white;
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }
        
        .check-btn:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }
        
        .check-btn.checked {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }
        
        /* ê¸°ì¶œë¬¸ì œ íšŒë… íŠ¸ë˜ì»¤ */
        .rotation-tracker {
            margin-top: 15px;
        }
        
        .subject-rotation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--bg-light);
            border-radius: 8px;
            margin-bottom: 10px;
            position: relative;
        }
        
        .subject-name {
            font-weight: 600;
            flex: 1;
            cursor: pointer;
        }
        
        .rotation-circles {
            display: flex;
            gap: 8px;
        }
        
        .rotation-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: white;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .rotation-circle.completed {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }
        
        .rotation-circle.current {
            background: var(--warning);
            color: white;
            border-color: var(--warning);
            animation: blink 1.5s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        /* í•™ìŠµ íƒ€ì´ë¨¸ */
        .timer-display {
            font-size: 3rem;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            font-family: 'SF Mono', monospace;
            color: var(--primary-dark);
        }
        
        .timer-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .timer-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .timer-btn.start {
            background: var(--success);
            color: white;
        }
        
        .timer-btn.pause {
            background: var(--warning);
            color: white;
        }
        
        .timer-btn.reset {
            background: var(--danger);
            color: white;
        }
        
        .timer-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        /* ì£¼ê°„ í•™ìŠµ í†µê³„ */
        .weekly-stats {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .day-stat {
            text-align: center;
            padding: 10px;
            background: var(--bg-light);
            border-radius: 8px;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .day-stat.today {
            background: var(--accent);
            color: white;
        }
        
        .day-stat.completed {
            background: var(--success);
            color: white;
        }
        
        .day-name {
            font-size: 0.85rem;
            margin-bottom: 5px;
        }
        
        .day-hours {
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        /* ê³¼ëª©ë³„ ì§„ë„ */
        .subject-progress {
            margin-top: 15px;
        }
        
        .progress-item {
            margin-bottom: 15px;
            position: relative;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            cursor: pointer;
        }
        
        .progress-label {
            font-weight: 600;
        }
        
        .progress-value {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .progress-bar {
            height: 20px;
            background: var(--bg-light);
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--success));
            border-radius: 10px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.75rem;
            font-weight: bold;
        }
        
        /* ëª¨ì˜ê³ ì‚¬ ì ìˆ˜ íŠ¸ë˜ì»¤ */
        .mock-scores {
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .score-entry {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: var(--bg-light);
            border-radius: 8px;
            margin-bottom: 8px;
            position: relative;
        }
        
        .score-date {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .score-value {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 20px;
            background: white;
        }
        
        .score-value.pass {
            color: var(--success);
            border: 2px solid var(--success);
        }
        
        .score-value.fail {
            color: var(--danger);
            border: 2px solid var(--danger);
        }
        
        .score-actions {
            position: absolute;
            right: 80px;
            display: flex;
            gap: 5px;
            opacity: 1;
            transition: opacity 0.3s;
        }

        .score-action-btn {
            width: 24px;
            height: 24px;
            border: none;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .score-action-btn:hover {
            background: var(--accent);
            color: white;
            transform: scale(1.1);
        }
        
        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
        }
        
        .modal.show {
            display: block;
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .modal-close {
            width: 30px;
            height: 30px;
            border: none;
            background: var(--bg-light);
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        .modal-close:hover {
            background: var(--danger);
            color: white;
        }
        
        .modal-body {
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--text-secondary);
        }
        
        .form-input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
        }
        
        .form-select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .modal-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .modal-btn.cancel {
            background: var(--bg-light);
            color: var(--text-primary);
        }
        
        .modal-btn.save {
            background: var(--accent);
            color: white;
        }
        
        .modal-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        /* ë…¸íŠ¸ ì„¹ì…˜ */
        .notes-section {
            margin-top: 20px;
        }
        
        .notes-input {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.95rem;
            resize: vertical;
            transition: border-color 0.3s;
        }
        
        .notes-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
        }
        
        .notes-toolbar {
            margin-top: 10px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .notes-btn {
            padding: 8px 16px;
            border: 1px solid var(--border);
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .notes-btn:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .today-plan {
                grid-column: span 1;
            }
            
            .timer-display {
                font-size: 2.5rem;
            }
            
            .weekly-stats {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .time-blocks {
                grid-template-columns: 1fr;
            }
        }
        
        /* í† ìŠ¤íŠ¸ ì•Œë¦¼ */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-dark);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1000;
            animation: slideInToast 0.3s ease;
        }
        
        @keyframes slideInToast {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <div class="header-top">
                <h1 class="title">ğŸ¯ ë²•ë¬´ì‚¬ ì‹œí—˜ ì „ëµì  í•™ìŠµ ì‹œìŠ¤í…œ</h1>
                <div class="d-day-badge" id="dday">D-318</div>
            </div>
            <div class="study-mode-selector">
                <button class="mode-btn" onclick="setExamType('1ì°¨')">1ì°¨ ì‹œí—˜</button>
                <button class="mode-btn" onclick="setExamType('2ì°¨')">2ì°¨ ì‹œí—˜</button>
            </div>
            <div class="study-mode-selector" style="margin-top: 10px;">
                <button class="mode-btn active" onclick="setMode('ì§ì¥ì¸')">ì§ì¥ì¸ ëª¨ë“œ</button>
                <button class="mode-btn" onclick="setMode('ì „ì—…')">ì „ì—… ëª¨ë“œ</button>
                <button class="mode-btn" onclick="setMode('ì£¼ë§ì „ì‚¬')">ì£¼ë§ì „ì‚¬ ëª¨ë“œ</button>
            </div>
        </div>
        
        <!-- ëŒ€ì‹œë³´ë“œ ê·¸ë¦¬ë“œ -->
        <div class="dashboard-grid">
            <!-- ì˜¤ëŠ˜ì˜ í•™ìŠµ ê³„íš -->
            <div class="card today-plan">
                <div class="card-header">
                    <h2 class="card-title">ğŸ“š ì˜¤ëŠ˜ì˜ í•™ìŠµ ì „ëµ</h2>
                    <div class="card-actions">
                        <button class="action-btn" onclick="addTimeBlock()">â•</button>
                    </div>
                </div>
                <div class="time-blocks" id="time-blocks-container">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
                <div style="background: #FFF5F5; padding: 15px; border-radius: 8px; border-left: 4px solid var(--danger); margin-top: 15px;">
                    <div style="font-weight: 600; margin-bottom: 10px; color: var(--danger);">ğŸ’¡ í•©ê²©ì í‰ê·  (ì§ì¥ë³‘í–‰ ê¸°ì¤€)</div>
                    <div style="font-size: 0.9rem; line-height: 1.6;">
                        â€¢ ì¼ì¼ í•™ìŠµì‹œê°„: í‰ì¼ 4-5ì‹œê°„<br>
                        â€¢ ê¸°ì¶œë¬¸ì œ íšŒë…: ê³¼ëª©ë‹¹ 6-7íšŒ<br>
                        â€¢ 1ì°¨ ì¤€ë¹„ê¸°ê°„: 12-18ê°œì›”
                    </div>
                </div>
            </div>
            
            <!-- ê¸°ì¶œë¬¸ì œ íšŒë… íŠ¸ë˜ì»¤ -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">ğŸ”„ ê¸°ì¶œë¬¸ì œ íšŒë… í˜„í™©</h2>
                    <div class="card-actions">
                        <button class="action-btn" onclick="resetRotations()">ğŸ”„</button>
                    </div>
                </div>
                <div class="rotation-tracker" id="rotation-tracker">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
            </div>
            
            <!-- í•™ìŠµ íƒ€ì´ë¨¸ -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">â±ï¸ ì˜¤ëŠ˜ì˜ í•™ìŠµ ì‹œê°„</h2>
                </div>
                <div class="timer-display" id="timer">00:00:00</div>
                <div class="timer-controls">
                    <button class="timer-btn start" onclick="startTimer()">ì‹œì‘</button>
                    <button class="timer-btn pause" onclick="pauseTimer()">ì¼ì‹œì •ì§€</button>
                    <button class="timer-btn reset" onclick="resetTimer()">ë¦¬ì…‹</button>
                </div>
                <div class="weekly-stats" id="weekly-stats">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
            </div>
            
            <!-- ê³¼ëª©ë³„ ì§„ë„ í˜„í™© -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">ğŸ“Š ê³¼ëª©ë³„ ì§„ë„ìœ¨</h2>
                    <div class="card-actions">
                        <button class="action-btn" onclick="updateAllProgress()">âœï¸</button>
                    </div>
                </div>
                <div class="subject-progress" id="subject-progress">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
            </div>
            
            <!-- ëª¨ì˜ê³ ì‚¬ ì ìˆ˜ íŠ¸ë˜ì»¤ -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">ğŸ“ ëª¨ì˜ê³ ì‚¬ ì ìˆ˜ ì¶”ì´</h2>
                    <div class="card-actions">
                        <button class="action-btn" onclick="showScoreModal()">â•</button>
                    </div>
                </div>
                <div class="mock-scores" id="mock-scores">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
            </div>
            
            <!-- ë™ê¸°ë¶€ì—¬ ì¹´ë“œ -->
            <div class="card">
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 12px; text-align: center;">
                    <div style="font-size: 1.1rem; font-style: italic; margin-bottom: 10px;" id="motivation-quote">
                        "í¬ê¸°í•˜ì§€ ì•Šìœ¼ë©´ ë°˜ë“œì‹œ í•©ê²©í•œë‹¤. ì‹œí—˜ì€ ëê¹Œì§€ ë²„í‹°ëŠ” ê²ƒì…ë‹ˆë‹¤."
                    </div>
                    <div style="font-size: 0.9rem; opacity: 0.9;">- 29íšŒ í•©ê²©ì -</div>
                </div>
                <div style="background: #FFF5F5; padding: 15px; border-radius: 8px; border-left: 4px solid var(--danger); margin-top: 15px;">
                    <div style="font-weight: 600; margin-bottom: 10px; color: var(--danger);">ğŸ† í•©ê²©ì ì¡°ì–¸</div>
                    <div style="font-size: 0.9rem; line-height: 1.6;">
                        â€¢ ê¸°ì¶œë¬¸ì œ 6-7íšŒë…ì´ í•µì‹¬<br>
                        â€¢ ìµœì‹ íŒë¡€ëŠ” ë°˜ë“œì‹œ ì²´í¬<br>
                        â€¢ ëª¨ì˜ê³ ì‚¬ ì ìˆ˜ì— ì—°ì—°í•˜ì§€ ë§ ê²ƒ<br>
                        â€¢ ë§¤ì¼ ê¾¸ì¤€íˆê°€ ë‹µì…ë‹ˆë‹¤
                    </div>
                </div>
            </div>
        </div>
        
        <!-- í•™ìŠµ ë…¸íŠ¸ ì„¹ì…˜ -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">ğŸ“ ì˜¤ëŠ˜ì˜ í•™ìŠµ ë…¸íŠ¸</h2>
            </div>
            <div class="notes-section">
                <textarea class="notes-input" placeholder="ì˜¤ëŠ˜ í•™ìŠµí•œ í•µì‹¬ ë‚´ìš©, í‹€ë¦° ë¬¸ì œ, í—·ê°ˆë¦¬ëŠ” ê°œë…ì„ ì •ë¦¬í•˜ì„¸ìš”..." id="study-notes"></textarea>
                <div class="notes-toolbar">
                    <button class="notes-btn" onclick="saveNotes()">ì €ì¥</button>
                    <button class="notes-btn" onclick="showPreviousNotes()">ì´ì „ ë…¸íŠ¸</button>
                    <button class="notes-btn" onclick="exportNotes()">ë‚´ë³´ë‚´ê¸°</button>
                    <button class="notes-btn" onclick="addErrorNote()">ì˜¤ë‹µë…¸íŠ¸ ì¶”ê°€</button>
                    <button class="notes-btn" onclick="clearNotes()">ì´ˆê¸°í™”</button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div style="text-align: center; padding: 20px; color: var(--text-secondary); font-size: 0.85rem;">
            ë²•ë¬´ì‚¬ ì‹œí—˜ ì „ëµì  í•™ìŠµ ì‹œìŠ¤í…œ v2.0.0 | 1ì°¨/2ì°¨ ì‹œí—˜ ì§€ì›
        </div>
    </div>
    
    <!-- ëª¨ë‹¬ë“¤ -->
    <div id="scoreModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ëª¨ì˜ê³ ì‚¬ ì ìˆ˜ ì¶”ê°€</h3>
                <button class="modal-close" onclick="closeModal('scoreModal')">âœ•</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">ì‹œí—˜ ë‚ ì§œ</label>
                    <input type="date" class="form-input" id="scoreDate">
                </div>
                <div class="form-group">
                    <label class="form-label">ì ìˆ˜</label>
                    <input type="number" step="0.5" class="form-input" id="scoreValue" placeholder="ì˜ˆ: 58.5">
                </div>
                <div class="form-group">
                    <label class="form-label">ë©”ëª¨ (ì„ íƒ)</label>
                    <input type="text" class="form-input" id="scoreMemo" placeholder="ì˜ˆ: 3ì°¨ ëª¨ì˜ê³ ì‚¬">
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel" onclick="closeModal('scoreModal')">ì·¨ì†Œ</button>
                <button class="modal-btn save" onclick="saveScore()">ì €ì¥</button>
            </div>
        </div>
    </div>
    
    <div id="timeBlockModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">í•™ìŠµ ì‹œê°„ ë¸”ë¡ ì¶”ê°€</h3>
                <button class="modal-close" onclick="closeModal('timeBlockModal')">âœ•</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">ì‹œê°„ëŒ€</label>
                    <input type="text" class="form-input" id="blockTime" placeholder="ì˜ˆ: 06:00-08:00">
                </div>
                <div class="form-group">
                    <label class="form-label">ê³¼ëª©</label>
                    <select class="form-select" id="blockSubject">
                        <optgroup label="1ì°¨ ì‹œí—˜">
                            <option value="í—Œë²•">í—Œë²•</option>
                            <option value="ë¯¼ë²•">ë¯¼ë²•</option>
                            <option value="ìƒë²•">ìƒë²•</option>
                            <option value="ë¯¼ì‚¬ì§‘í–‰ë²•">ë¯¼ì‚¬ì§‘í–‰ë²•</option>
                            <option value="ë¶€ë™ì‚°ë“±ê¸°ë²•">ë¶€ë™ì‚°ë“±ê¸°ë²•</option>
                            <option value="ìƒì—…ë“±ê¸°ë²•">ìƒì—…ë“±ê¸°ë²•</option>
                            <option value="ê³µíƒë²•">ê³µíƒë²•</option>
                        </optgroup>
                        <optgroup label="2ì°¨ ì‹œí—˜">
                            <option value="ë¯¼ë²• (2ì°¨)">ë¯¼ë²• (2ì°¨)</option>
                            <option value="ë¶€ë™ì‚°ë“±ê¸°ë²• (2ì°¨)">ë¶€ë™ì‚°ë“±ê¸°ë²• (2ì°¨)</option>
                            <option value="ìƒì—…ë“±ê¸°ë²• (2ì°¨)">ìƒì—…ë“±ê¸°ë²• (2ì°¨)</option>
                            <option value="ë¯¼ì‚¬ì§‘í–‰ë²• (2ì°¨)">ë¯¼ì‚¬ì§‘í–‰ë²• (2ì°¨)</option>
                        </optgroup>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">í•™ìŠµ ë‚´ìš©</label>
                    <input type="text" class="form-input" id="blockDetail" placeholder="ì˜ˆ: ê¸°ì¶œë¬¸ì œ #201-250">
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel" onclick="closeModal('timeBlockModal')">ì·¨ì†Œ</button>
                <button class="modal-btn save" onclick="saveTimeBlock()">ì €ì¥</button>
            </div>
        </div>
    </div>
    
    <script>
        // ë°ì´í„° ì´ˆê¸°í™”
        let studyData = {
            mode: localStorage.getItem('studyMode') || 'ì§ì¥ì¸',
            examType: localStorage.getItem('examType') || '1ì°¨',
            timer: {
                seconds: 0,
                isRunning: false,
                interval: null
            },
            subjects1st: [
                { name: 'í—Œë²•', total: 500, completed: 320, rotations: [true, true, false, false, false, false, false] },
                { name: 'ë¯¼ë²•', total: 800, completed: 580, rotations: [true, true, true, false, false, false, false] },
                { name: 'ìƒë²•', total: 500, completed: 280, rotations: [true, true, false, false, false, false, false] },
                { name: 'ë¯¼ì‚¬ì§‘í–‰ë²•', total: 400, completed: 180, rotations: [true, false, false, false, false, false, false] },
                { name: 'ë¶€ë™ì‚°ë“±ê¸°ë²•', total: 500, completed: 420, rotations: [true, true, true, true, false, false, false] },
                { name: 'ìƒì—…ë“±ê¸°ë²•', total: 300, completed: 150, rotations: [true, false, false, false, false, false, false] },
                { name: 'ê³µíƒë²•', total: 300, completed: 200, rotations: [true, true, false, false, false, false, false] }
            ],
            subjects2nd: [
                { name: 'ë¯¼ë²• (2ì°¨)', total: 100, completed: 0, rotations: [false, false, false, false, false, false, false] },
                { name: 'ë¶€ë™ì‚°ë“±ê¸°ë²• (2ì°¨)', total: 100, completed: 0, rotations: [false, false, false, false, false, false, false] },
                { name: 'ìƒì—…ë“±ê¸°ë²• (2ì°¨)', total: 50, completed: 0, rotations: [false, false, false, false, false, false, false] },
                { name: 'ë¯¼ì‚¬ì§‘í–‰ë²• (2ì°¨)', total: 50, completed: 0, rotations: [false, false, false, false, false, false, false] }
            ],
            subjects: [],  // Will be set dynamically based on examType
            timeBlocks: [],
            mockScores: [],
            weeklyHours: {},
            notes: {}
        };
        
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë°ì´í„° ë¡œë“œ
        function loadData() {
            const saved = localStorage.getItem('studyData');
            if (saved) {
                const loadedData = JSON.parse(saved);
                studyData = { ...studyData, ...loadedData };

                // 2ì°¨ ê³¼ëª©ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ì„¤ì •
                if (!studyData.subjects2nd) {
                    studyData.subjects2nd = [
                        { name: 'ë¯¼ë²• (2ì°¨)', total: 100, completed: 0, rotations: [false, false, false, false, false, false, false] },
                        { name: 'ë¶€ë™ì‚°ë“±ê¸°ë²• (2ì°¨)', total: 100, completed: 0, rotations: [false, false, false, false, false, false, false] },
                        { name: 'ìƒì—…ë“±ê¸°ë²• (2ì°¨)', total: 50, completed: 0, rotations: [false, false, false, false, false, false, false] },
                        { name: 'ë¯¼ì‚¬ì§‘í–‰ë²• (2ì°¨)', total: 50, completed: 0, rotations: [false, false, false, false, false, false, false] }
                    ];
                }

                // 1ì°¨ ê³¼ëª©ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ì„¤ì • (êµ¬ë²„ì „ í˜¸í™˜ì„±)
                if (!studyData.subjects1st && studyData.subjects) {
                    studyData.subjects1st = studyData.subjects;
                }
            }

            // ì‹œí—˜ íƒ€ì…ì— ë”°ë¼ ê³¼ëª© ì„¤ì •
            updateSubjectsByExamType();

            // ì˜¤ëŠ˜ íƒ€ì´ë¨¸ ë°ì´í„° ë¡œë“œ
            const today = new Date().toISOString().split('T')[0];
            const todayTimer = localStorage.getItem(`timer_${today}`);
            if (todayTimer) {
                studyData.timer.seconds = parseInt(todayTimer);
            }
        }

        // ì‹œí—˜ íƒ€ì…ì— ë”°ë¼ ê³¼ëª© ì„¤ì •
        function updateSubjectsByExamType() {
            if (studyData.examType === '2ì°¨') {
                studyData.subjects = studyData.subjects2nd;
            } else {
                studyData.subjects = studyData.subjects1st;
            }
        }
        
        // ë°ì´í„° ì €ì¥
        function saveData() {
            localStorage.setItem('studyData', JSON.stringify(studyData));
            
            // ì˜¤ëŠ˜ íƒ€ì´ë¨¸ ë³„ë„ ì €ì¥
            const today = new Date().toISOString().split('T')[0];
            localStorage.setItem(`timer_${today}`, studyData.timer.seconds);
        }
        
        // ì´ˆê¸°í™” í•¨ìˆ˜
        function init() {
            loadData();
            updateDDay();
            renderTimeBlocks();
            renderRotationTracker();
            renderWeeklyStats();
            renderSubjectProgress();
            renderMockScores();
            updateTimerDisplay();
            loadTodayNotes();
            rotateMotivation();

            // ì‹œí—˜ íƒ€ì… ë° ëª¨ë“œ ì„¤ì •
            document.querySelectorAll('.mode-btn').forEach(btn => {
                const btnText = btn.textContent.trim();
                // ì‹œí—˜ íƒ€ì… ë²„íŠ¼
                if (btnText === '1ì°¨ ì‹œí—˜' || btnText === '2ì°¨ ì‹œí—˜') {
                    btn.classList.remove('active');
                    if (btnText === studyData.examType + ' ì‹œí—˜') {
                        btn.classList.add('active');
                    }
                }
                // í•™ìŠµ ëª¨ë“œ ë²„íŠ¼
                else {
                    btn.classList.remove('active');
                    if(btnText.includes(studyData.mode)) {
                        btn.classList.add('active');
                    }
                }
            });
            
            // ê¸°ë³¸ ì‹œê°„ ë¸”ë¡ì´ ì—†ìœ¼ë©´ ì¶”ê°€
            if (studyData.timeBlocks.length === 0) {
                studyData.timeBlocks = [
                    { id: Date.now(), time: '05:00-07:00', subject: 'ë¯¼ë²•', detail: 'ê¸°ì¶œë¬¸ì œ #201-250', completed: false },
                    { id: Date.now() + 1, time: '19:00-22:00', subject: 'í—Œë²•', detail: 'ìµœì‹ íŒë¡€ + ê¸°ì¶œ íšŒë…', completed: false }
                ];
                saveData();
                renderTimeBlocks();
            }
            
            // ê¸°ë³¸ ì ìˆ˜ê°€ ì—†ìœ¼ë©´ ì¶”ê°€
            if (studyData.mockScores.length === 0) {
                studyData.mockScores = [
                    { id: Date.now(), date: '2024-09-29', score: 52.5, memo: '1ì°¨ ëª¨ì˜' },
                    { id: Date.now() + 1, date: '2024-10-06', score: 55.0, memo: '2ì°¨ ëª¨ì˜' },
                    { id: Date.now() + 2, date: '2024-10-13', score: 58.5, memo: '3ì°¨ ëª¨ì˜' }
                ];
                saveData();
                renderMockScores();
            }
        }
        
        // D-Day ê³„ì‚°
        function updateDDay() {
            const today = new Date();
            const examDate = new Date('2026-08-29');
            const diffTime = examDate - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            document.getElementById('dday').textContent = `D-${diffDays}`;
        }
        
        // ì‹œí—˜ íƒ€ì… ì„¤ì •
        function setExamType(type) {
            studyData.examType = type;
            localStorage.setItem('examType', type);

            // ê³¼ëª© ì—…ë°ì´íŠ¸
            updateSubjectsByExamType();

            saveData();

            document.querySelectorAll('.mode-btn').forEach(btn => {
                if (btn.textContent.includes('ì‹œí—˜')) {
                    btn.classList.remove('active');
                    if (btn.textContent === type + ' ì‹œí—˜') {
                        btn.classList.add('active');
                    }
                }
            });

            // UI ì—…ë°ì´íŠ¸
            renderRotationTracker();
            renderSubjectProgress();

            showToast(`${type} ì‹œí—˜ ëª¨ë“œë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤`);
        }

        // í•™ìŠµ ëª¨ë“œ ì„¤ì •
        function setMode(mode) {
            studyData.mode = mode;
            localStorage.setItem('studyMode', mode);
            saveData();

            document.querySelectorAll('.mode-btn').forEach(btn => {
                if (!btn.textContent.includes('ì‹œí—˜')) {
                    btn.classList.remove('active');
                    if (btn.textContent.includes(mode)) {
                        btn.classList.add('active');
                    }
                }
            });

            showToast(`${mode} ëª¨ë“œë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤`);
        }
        
        // ì‹œê°„ ë¸”ë¡ ë Œë”ë§
        function renderTimeBlocks() {
            const container = document.getElementById('time-blocks-container');
            container.innerHTML = '';

            studyData.timeBlocks.forEach(block => {
                const blockEl = document.createElement('div');
                blockEl.className = `time-block ${block.completed ? 'completed' : ''}`;

                // ì•¡ì…˜ ë²„íŠ¼ ì»¨í…Œì´ë„ˆ
                const actionsDiv = document.createElement('div');
                actionsDiv.className = 'time-block-actions';

                // ìˆ˜ì • ë²„íŠ¼
                const editBtn = document.createElement('button');
                editBtn.className = 'time-block-btn';
                editBtn.textContent = 'âœï¸';
                editBtn.onclick = () => editTimeBlock(block.id);

                // ì‚­ì œ ë²„íŠ¼
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'time-block-btn';
                deleteBtn.textContent = 'ğŸ—‘ï¸';
                deleteBtn.onclick = () => deleteTimeBlock(block.id);

                actionsDiv.appendChild(editBtn);
                actionsDiv.appendChild(deleteBtn);

                // ì‹œê°„ ë¼ë²¨
                const timeLabel = document.createElement('div');
                timeLabel.className = 'time-label';
                timeLabel.textContent = `â° ${block.time}`;

                // ê³¼ëª©ëª…
                const subjectDiv = document.createElement('div');
                subjectDiv.className = 'time-subject';
                subjectDiv.textContent = block.subject;

                // ìƒì„¸ ë‚´ìš©
                const detailDiv = document.createElement('div');
                detailDiv.className = 'time-detail';
                detailDiv.textContent = block.detail;

                // ì™„ë£Œ ë²„íŠ¼
                const checkBtn = document.createElement('button');
                checkBtn.className = `check-btn ${block.completed ? 'checked' : ''}`;
                checkBtn.textContent = block.completed ? 'ì™„ë£Œâœ“' : 'ì™„ë£Œ';
                checkBtn.onclick = () => toggleTimeBlock(block.id);

                // ëª¨ë‘ ì¶”ê°€
                blockEl.appendChild(actionsDiv);
                blockEl.appendChild(timeLabel);
                blockEl.appendChild(subjectDiv);
                blockEl.appendChild(detailDiv);
                blockEl.appendChild(checkBtn);

                container.appendChild(blockEl);
            });
        }
        
        // ì‹œê°„ ë¸”ë¡ í† ê¸€
        function toggleTimeBlock(id) {
            const block = studyData.timeBlocks.find(b => b.id === id);
            if (block) {
                block.completed = !block.completed;
                if (block.completed) {
                    // 2ì‹œê°„ ì¶”ê°€
                    studyData.timer.seconds += 7200;
                    updateTimerDisplay();
                    showToast('í•™ìŠµ ì™„ë£Œ! 2ì‹œê°„ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ‘');
                } else {
                    studyData.timer.seconds = Math.max(0, studyData.timer.seconds - 7200);
                    updateTimerDisplay();
                }
                saveData();
                renderTimeBlocks();
            }
        }
        
        // ì‹œê°„ ë¸”ë¡ ì¶”ê°€
        function addTimeBlock() {
            document.getElementById('timeBlockModal').classList.add('show');
        }
        
        // ì‹œê°„ ë¸”ë¡ ì €ì¥
        function saveTimeBlock() {
            const time = document.getElementById('blockTime').value;
            const subject = document.getElementById('blockSubject').value;
            const detail = document.getElementById('blockDetail').value;
            
            if (time && subject && detail) {
                studyData.timeBlocks.push({
                    id: Date.now(),
                    time,
                    subject,
                    detail,
                    completed: false
                });
                saveData();
                renderTimeBlocks();
                closeModal('timeBlockModal');
                showToast('í•™ìŠµ ë¸”ë¡ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤');
            }
        }
        
        // ì‹œê°„ ë¸”ë¡ ì‚­ì œ
        function deleteTimeBlock(id) {
            if (confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                studyData.timeBlocks = studyData.timeBlocks.filter(b => b.id !== id);
                saveData();
                renderTimeBlocks();
                showToast('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');
            }
        }
        
        // ì‹œê°„ ë¸”ë¡ ìˆ˜ì • (ê°„ë‹¨ êµ¬í˜„)
        function editTimeBlock(id) {
            const block = studyData.timeBlocks.find(b => b.id === id);
            if (block) {
                const newTime = prompt('ì‹œê°„ëŒ€:', block.time);
                const newSubject = prompt('ê³¼ëª©:', block.subject);
                const newDetail = prompt('ë‚´ìš©:', block.detail);
                
                if (newTime && newSubject && newDetail) {
                    block.time = newTime;
                    block.subject = newSubject;
                    block.detail = newDetail;
                    saveData();
                    renderTimeBlocks();
                    showToast('ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤');
                }
            }
        }
        
        // íšŒë… íŠ¸ë˜ì»¤ ë Œë”ë§
        function renderRotationTracker() {
            const container = document.getElementById('rotation-tracker');
            container.innerHTML = '';
            
            studyData.subjects.forEach((subject, idx) => {
                const div = document.createElement('div');
                div.className = 'subject-rotation';
                
                let circlesHtml = '';
                subject.rotations.forEach((completed, i) => {
                    const isCurrentjsxjs = completed && !subject.rotations[i + 1];
                    circlesHtml += `
                        <div class="rotation-circle ${completed ? 'completed' : ''} ${isCurrentjsxjs ? 'current' : ''}" 
                             onclick="toggleRotation(${idx}, ${i})">
                            ${i + 1}
                        </div>
                    `;
                });
                
                div.innerHTML = `
                    <span class="subject-name">${subject.name}</span>
                    <div class="rotation-circles">${circlesHtml}</div>
                `;
                container.appendChild(div);
            });
        }
        
        // íšŒë… í† ê¸€
        function toggleRotation(subjectIdx, rotationIdx) {
            const subject = studyData.subjects[subjectIdx];
            subject.rotations[rotationIdx] = !subject.rotations[rotationIdx];
            
            // ì´ì „ íšŒë…ì´ ì™„ë£Œë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì™„ë£Œ ì²˜ë¦¬
            for (let i = 0; i < rotationIdx; i++) {
                subject.rotations[i] = true;
            }
            
            saveData();
            renderRotationTracker();
            
            if (subject.rotations[rotationIdx]) {
                showToast(`${subject.name} ${rotationIdx + 1}íšŒë… ì™„ë£Œ! ğŸ‰`);
            }
        }
        
        // íšŒë… ì´ˆê¸°í™”
        function resetRotations() {
            if (confirm('ëª¨ë“  íšŒë… ê¸°ë¡ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                studyData.subjects.forEach(subject => {
                    subject.rotations = [false, false, false, false, false, false, false];
                });
                saveData();
                renderRotationTracker();
                showToast('íšŒë… ê¸°ë¡ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤');
            }
        }
        
        // íƒ€ì´ë¨¸ ê¸°ëŠ¥
        function startTimer() {
            if (!studyData.timer.isRunning) {
                studyData.timer.isRunning = true;
                studyData.timer.interval = setInterval(() => {
                    studyData.timer.seconds++;
                    updateTimerDisplay();
                    
                    // 30ë¶„ë§ˆë‹¤ ìë™ ì €ì¥
                    if (studyData.timer.seconds % 1800 === 0) {
                        saveData();
                        showToast('í•™ìŠµ ì§„ë„ê°€ ìë™ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤');
                    }
                }, 1000);
            }
        }
        
        function pauseTimer() {
            studyData.timer.isRunning = false;
            clearInterval(studyData.timer.interval);
            saveData();
        }
        
        function resetTimer() {
            if (confirm('ì •ë§ ë¦¬ì…‹í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                studyData.timer.isRunning = false;
                clearInterval(studyData.timer.interval);
                studyData.timer.seconds = 0;
                updateTimerDisplay();
                saveData();
            }
        }
        
        function updateTimerDisplay() {
            const hours = Math.floor(studyData.timer.seconds / 3600);
            const minutes = Math.floor((studyData.timer.seconds % 3600) / 60);
            const secs = studyData.timer.seconds % 60;
            
            document.getElementById('timer').textContent = 
                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }
        
        // ì£¼ê°„ í†µê³„ ë Œë”ë§
        function renderWeeklyStats() {
            const container = document.getElementById('weekly-stats');
            container.innerHTML = '';
            
            const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
            const today = new Date().getDay();
            const adjustedToday = today === 0 ? 6 : today - 1;
            
            days.forEach((day, idx) => {
                const hours = studyData.weeklyHours[day] || 0;
                const isToday = idx === adjustedToday;
                const isCompleted = hours >= 4;
                
                const div = document.createElement('div');
                div.className = `day-stat ${isToday ? 'today' : ''} ${isCompleted ? 'completed' : ''}`;
                div.innerHTML = `
                    <div class="day-name">${day}</div>
                    <div class="day-hours">${hours}h</div>
                `;
                div.onclick = () => updateDayHours(day);
                container.appendChild(div);
            });
        }
        
        // ì¼ì¼ ì‹œê°„ ì—…ë°ì´íŠ¸
        function updateDayHours(day) {
            const hours = prompt(`${day}ìš”ì¼ í•™ìŠµ ì‹œê°„ (ì‹œê°„):`, studyData.weeklyHours[day] || 0);
            if (hours !== null && !isNaN(hours)) {
                studyData.weeklyHours[day] = parseFloat(hours);
                saveData();
                renderWeeklyStats();
            }
        }
        
        // ê³¼ëª©ë³„ ì§„ë„ ë Œë”ë§
        function renderSubjectProgress() {
            const container = document.getElementById('subject-progress');
            container.innerHTML = '';

            studyData.subjects.forEach((subject, idx) => {
                const percent = Math.round((subject.completed / subject.total) * 100);
                const div = document.createElement('div');
                div.className = 'progress-item';

                // í—¤ë” ìƒì„±
                const header = document.createElement('div');
                header.className = 'progress-header';
                header.innerHTML = `
                    <span class="progress-label">${subject.name}</span>
                    <span class="progress-value">${subject.completed}/${subject.total} ë¬¸ì œ</span>
                `;
                header.onclick = () => updateProgress(idx);

                // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ìƒì„±
                const progressBar = document.createElement('div');
                progressBar.className = 'progress-bar';
                progressBar.innerHTML = `
                    <div class="progress-fill" style="width: ${percent}%">${percent}%</div>
                `;
                progressBar.onclick = () => updateProgress(idx);

                div.appendChild(header);
                div.appendChild(progressBar);
                container.appendChild(div);
            });
        }

        // ì§„ë„ ì—…ë°ì´íŠ¸
        function updateProgress(idx) {
            const subject = studyData.subjects[idx];
            const completed = prompt(`${subject.name} ì™„ë£Œ ë¬¸ì œìˆ˜:`, subject.completed);

            if (completed !== null && !isNaN(completed)) {
                subject.completed = Math.min(parseInt(completed), subject.total);

                // ì‹¤ì œ ë°ì´í„° ì†ŒìŠ¤ì—ë„ ë°˜ì˜
                if (studyData.examType === '2ì°¨') {
                    studyData.subjects2nd[idx] = subject;
                } else {
                    studyData.subjects1st[idx] = subject;
                }

                saveData();
                renderSubjectProgress();
                showToast(`${subject.name} ì§„ë„ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤`);
            }
        }
        
        // ì „ì²´ ì§„ë„ ì—…ë°ì´íŠ¸
        function updateAllProgress() {
            showToast('ê° ê³¼ëª©ì„ í´ë¦­í•˜ì—¬ ì§„ë„ë¥¼ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”');
        }
        
        // ëª¨ì˜ê³ ì‚¬ ì ìˆ˜ ë Œë”ë§
        function renderMockScores() {
            const container = document.getElementById('mock-scores');
            container.innerHTML = '';

            studyData.mockScores.forEach(score => {
                const isPass = score.score >= 60;
                const div = document.createElement('div');
                div.className = 'score-entry';

                // ë‚ ì§œ ë° ë©”ëª¨ í‘œì‹œ
                const dateSpan = document.createElement('span');
                dateSpan.className = 'score-date';
                dateSpan.textContent = `${score.date} ${score.memo ? `(${score.memo})` : ''}`;

                // ì•¡ì…˜ ë²„íŠ¼ ì»¨í…Œì´ë„ˆ
                const actionsDiv = document.createElement('div');
                actionsDiv.className = 'score-actions';

                // ìˆ˜ì • ë²„íŠ¼
                const editBtn = document.createElement('button');
                editBtn.className = 'score-action-btn';
                editBtn.textContent = 'âœï¸';
                editBtn.onclick = () => editScore(score.id);

                // ì‚­ì œ ë²„íŠ¼
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'score-action-btn';
                deleteBtn.textContent = 'ğŸ—‘ï¸';
                deleteBtn.onclick = () => deleteScore(score.id);

                actionsDiv.appendChild(editBtn);
                actionsDiv.appendChild(deleteBtn);

                // ì ìˆ˜ í‘œì‹œ
                const scoreSpan = document.createElement('span');
                scoreSpan.className = `score-value ${isPass ? 'pass' : 'fail'}`;
                scoreSpan.textContent = `${score.score}ì `;

                div.appendChild(dateSpan);
                div.appendChild(actionsDiv);
                div.appendChild(scoreSpan);

                container.appendChild(div);
            });

            // ëª©í‘œ ì ìˆ˜ í‘œì‹œ
            const targetDiv = document.createElement('div');
            targetDiv.className = 'score-entry';
            targetDiv.innerHTML = `
                <span class="score-date">ëª©í‘œ ì ìˆ˜</span>
                <span class="score-value pass">65.0ì â†‘</span>
            `;
            container.appendChild(targetDiv);
        }
        
        // ì ìˆ˜ ëª¨ë‹¬ í‘œì‹œ
        function showScoreModal() {
            document.getElementById('scoreDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('scoreValue').value = '';
            document.getElementById('scoreMemo').value = '';
            document.getElementById('scoreModal').classList.add('show');
        }
        
        // ì ìˆ˜ ì €ì¥
        function saveScore() {
            const date = document.getElementById('scoreDate').value;
            const score = parseFloat(document.getElementById('scoreValue').value);
            const memo = document.getElementById('scoreMemo').value;
            
            if (date && !isNaN(score)) {
                studyData.mockScores.push({
                    id: Date.now(),
                    date,
                    score,
                    memo
                });
                
                // ë‚ ì§œìˆœ ì •ë ¬
                studyData.mockScores.sort((a, b) => new Date(a.date) - new Date(b.date));
                
                saveData();
                renderMockScores();
                closeModal('scoreModal');
                showToast(`${score}ì ì´ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤`);
            }
        }
        
        // ì ìˆ˜ ì‚­ì œ
        function deleteScore(id) {
            if (confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                studyData.mockScores = studyData.mockScores.filter(s => s.id !== id);
                saveData();
                renderMockScores();
                showToast('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');
            }
        }
        
        // ì ìˆ˜ ìˆ˜ì •
        function editScore(id) {
            const score = studyData.mockScores.find(s => s.id === id);
            if (score) {
                const newScore = prompt('ì ìˆ˜:', score.score);
                const newMemo = prompt('ë©”ëª¨:', score.memo || '');
                
                if (newScore !== null && !isNaN(newScore)) {
                    score.score = parseFloat(newScore);
                    score.memo = newMemo;
                    saveData();
                    renderMockScores();
                    showToast('ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤');
                }
            }
        }
        
        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }
        
        // ë…¸íŠ¸ ê¸°ëŠ¥
        function saveNotes() {
            const notes = document.getElementById('study-notes').value;
            const today = new Date().toISOString().split('T')[0];
            
            if (!studyData.notes) studyData.notes = {};
            studyData.notes[today] = {
                content: notes,
                timestamp: new Date().toISOString()
            };
            
            saveData();
            showToast('ë…¸íŠ¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ“');
        }
        
        function loadTodayNotes() {
            const today = new Date().toISOString().split('T')[0];
            if (studyData.notes && studyData.notes[today]) {
                document.getElementById('study-notes').value = studyData.notes[today].content;
            }
        }
        
        function showPreviousNotes() {
            if (!studyData.notes) {
                showToast('ì €ì¥ëœ ë…¸íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤');
                return;
            }
            
            const dates = Object.keys(studyData.notes).sort().reverse();
            if (dates.length === 0) {
                showToast('ì €ì¥ëœ ë…¸íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤');
                return;
            }
            
            let notesList = 'ğŸ“š ìµœê·¼ í•™ìŠµ ë…¸íŠ¸\n\n';
            dates.slice(0, 7).forEach(date => {
                const content = studyData.notes[date].content;
                notesList += `ğŸ“… ${date}\n${content.substring(0, 100)}...\n\n`;
            });
            
            alert(notesList);
        }
        
        function exportNotes() {
            const dataStr = JSON.stringify(studyData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `study_data_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            showToast('ë°ì´í„°ê°€ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤ ğŸ’¾');
        }
        
        function addErrorNote() {
            const subject = prompt('ê³¼ëª©ëª…:');
            const question = prompt('í‹€ë¦° ë¬¸ì œ ë²ˆí˜¸ ë˜ëŠ” ë‚´ìš©:');
            const reason = prompt('í‹€ë¦° ì´ìœ :');
            
            if (subject && question && reason) {
                const errorNote = `\n\n[ì˜¤ë‹µë…¸íŠ¸]\nê³¼ëª©: ${subject}\në¬¸ì œ: ${question}\nì´ìœ : ${reason}\n`;
                document.getElementById('study-notes').value += errorNote;
                showToast('ì˜¤ë‹µë…¸íŠ¸ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤');
            }
        }
        
        function clearNotes() {
            if (confirm('ì˜¤ëŠ˜ ë…¸íŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                document.getElementById('study-notes').value = '';
                showToast('ë…¸íŠ¸ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤');
            }
        }
        
        // ë™ê¸°ë¶€ì—¬ ë¬¸êµ¬ ë¡œí…Œì´ì…˜
        function rotateMotivation() {
            const quotes = [
                "í¬ê¸°í•˜ì§€ ì•Šìœ¼ë©´ ë°˜ë“œì‹œ í•©ê²©í•œë‹¤. ì‹œí—˜ì€ ëê¹Œì§€ ë²„í‹°ëŠ” ê²ƒì…ë‹ˆë‹¤.",
                "ë¨¸ë¦¬ë³´ë‹¤ ì¤‘ìš”í•œ ê²ƒì€ ì—‰ë©ì´ë¥¼ ì˜¤ë˜ ë¶™ì´ê³  ìˆì„ ìˆ˜ ìˆëŠ” ê²ƒ.",
                "ì§ì¥ë³‘í–‰ì´ë¼ë„ ë§¤ì¼ ê¾¸ì¤€íˆ í•˜ë©´ í•©ê²©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                "ëª¨ì˜ê³ ì‚¬ ì ìˆ˜ê°€ ë‚®ì•„ë„ í¬ê¸°í•˜ì§€ ë§ˆì„¸ìš”. ëê¹Œì§€ ê°€ë©´ ë©ë‹ˆë‹¤.",
                "ê¸°ì¶œë¬¸ì œë¥¼ ì™„ì „íˆ ë‚´ ê²ƒìœ¼ë¡œ ë§Œë“œëŠ” ê²ƒì´ í•©ê²©ì˜ ì§€ë¦„ê¸¸ì…ë‹ˆë‹¤.",
                "ì˜¤ëŠ˜ ëª»í•œ ê³µë¶€ëŠ” ë‚´ì¼ ë‘ ë°°ê°€ ë©ë‹ˆë‹¤. ì˜¤ëŠ˜ í•  ì¼ì€ ì˜¤ëŠ˜!",
                "1ë…„ ë°˜ì˜ ë…¸ë ¥ì´ í‰ìƒì˜ ìê²©ì¦ì´ ë©ë‹ˆë‹¤.",
                "ì‹œí—˜ì€ ì˜ ëª¨ë¥´ëŠ” ìƒíƒœì—ì„œ ë¶™ëŠ” ê±°ë‹¤.",
                "ë‚¨ë“¤ë„ ì–´ë µìŠµë‹ˆë‹¤. ë‚˜ë§Œ ì–´ë ¤ìš´ ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤.",
                "ë²„í‹°ë©´ í•©ê²©í•œë‹¤. ëê¹Œì§€ ë²„í‹°ëŠ” ê²ƒì…ë‹ˆë‹¤."
            ];
            
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            document.getElementById('motivation-quote').textContent = randomQuote;
        }
        
        // í† ìŠ¤íŠ¸ ë©”ì‹œì§€
        function showToast(message) {
            const existing = document.querySelector('.toast');
            if (existing) existing.remove();
            
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
        
        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 's':
                        e.preventDefault();
                        saveNotes();
                        break;
                    case ' ':
                        e.preventDefault();
                        if (studyData.timer.isRunning) pauseTimer();
                        else startTimer();
                        break;
                }
            }
        });
        
        // í˜ì´ì§€ ì¢…ë£Œ ì‹œ ìë™ ì €ì¥
        window.addEventListener('beforeunload', function() {
            saveData();
            if (document.getElementById('study-notes').value) {
                saveNotes();
            }
        });
        
        // 5ë¶„ë§ˆë‹¤ ë™ê¸°ë¶€ì—¬ ë¬¸êµ¬ ë³€ê²½
        setInterval(rotateMotivation, 300000);
        
        // ì´ˆê¸°í™” ì‹¤í–‰
        init();
    </script>
</body>
</html>